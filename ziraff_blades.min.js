!function(){"use strict";var e=angular.module("ziraff_blades",[]);function t(l,r,n,o){return l.remoteAPI=l.remoteAPI||window.location.host,{load_blade_sets:function(){var e=o.id||o.Id||null;return r.get(l.remoteAPI+"api/blade/getbladetypes?permissionKey="+n.current.data.permissionKey+"&&id="+e)},load_bldes_data:function(e,t){var a={CompanyId:742,ModuleDetailId:window.sessionStorage.getItem("ModuleDetailId"),PermissionKey:n.current.data.permissionKey,Role:"null",Id:o.id||o.Id||"null",BladeType:e,FilterType:t||"null"};return r.post(l.remoteAPI+"api/blade/GetBladeDetails",a)}}}e.factory("bldesService",t),t.$inject=["ziraffBladesConfiguration","$http","$state","$stateParams"],e.value("ziraffBladesConfiguration",{rootId:null,role:null,userName:null,remoteAPI:null})}();
!function(){function t(o,i){return{restrict:"E",scope:{configuration:"="},template:'<div id="zBladesRenderer"></div>',link:function(e,t,a){e.$on("load_analytics",function(){$("#zBladesRenderer").empty(),o.load_blade_sets().then(function(t){e.bladeSets=t.data,$("#zBladesRenderer").append(i('<div ng-repeat="bladeset in bladeSets track by $index"><blade-renderer blade-type="bladeset"></blade-renderer></div>')(e))})})},controller:"ziraffBCtrl"}}function e(t,e){}function a(l,a){return{restrict:"E",template:'<div ng-show="!isLoading" id="renderer_{{bladeType}}"></div><div ng-if="isLoading"><img src="https://i.gifer.com/6px6.gif"></div>',scope:{bladeType:"="},link:function(o,t,e){o.isLoading=!0;var i=["HCColumnDrillDown","HCPie","HCColumn","HCLine","HCBasicColumn","HCBasicColumnDrillDown","HCStackedColumn","HCStackedColumnDrillDown","HCDualAxisGraph"],n={HCColumnDrillDown:function(t,e){Highcharts.setOptions({colors:e.Data.Colors,lang:{thousandsSep:","}}),Highcharts.chart(t,{chart:{type:"column",backgroundColor:"transparent"},lang:{thousandsSep:","},title:{text:null},credits:{enabled:!1},xAxis:{className:"highcharts-color-0",type:"category",title:{text:e.Data.XTitle}},yAxis:{className:"highcharts-color-0",title:{text:e.Data.YTitle},gridLineWidth:0},legend:{enabled:!1},plotOptions:{series:{borderWidth:0,dataLabels:{enabled:!0,format:"{point.y:,.0f}"}}},tooltip:{formatter:function(){function t(e,t){var a=e.point.series.options.data.filter(function(t){return e.key==t[0]});return"tooltip"==t?a[0][2]:0}var e=this.point;return e.drilldown?0==this.point.tooltip||null==this.point.tooltip?'<span style="color:{point.color}">'+e.name+"</span>:"+this.point.y.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):'<span style="color:{point.color}">'+e.name+":#"+this.point.tooltip+"</span>-$"+this.point.y.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):0==t(this,"tooltip")||null==t(this,"tooltip")?'<span style="color:{point.color}">'+e.name+"</span>:"+this.point.y.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):'<span style="color:{point.color}">'+e.name+":#"+t(this,"tooltip")+"-$"+this.point.y.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},series:[{colorByPoint:!0,data:e.Data.Data.MainData}],drilldown:{series:e.Data.Data.SubData}})},HCPie:function(t,e){Highcharts.chart(t,{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie",backgroundColor:"transparent"},title:{text:null},yAxis:{gridLineWidth:0},tooltip:{formatter:function(){var t=this.point;return'<span style="color:{point.color}">'+t.name+"</span>: <b>"+t.y.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"</b><br/>"}},credits:{enabled:!1},plotOptions:{pie:{size:200,allowPointSelect:!0,dataLabels:{enabled:!1},showInLegend:!0}},series:[{colorByPoint:!0,data:e.Data}]})},HCColumn:function(t,e){Highcharts.setOptions({lang:{thousandsSep:","},colors:e.Data.Colors}),Highcharts.chart(t,{chart:{type:"column",backgroundColor:"transparent"},lang:{thousandsSep:","},title:{text:null},xAxis:{className:"highcharts-color-0",type:"category",title:{text:e.Data.XTitle}},yAxis:{className:"highcharts-color-0",title:{text:e.Data.YTitle},gridLineWidth:0},legend:{enabled:!1},credits:{enabled:!1},plotOptions:{series:{borderWidth:0,dataLabels:{enabled:!0,format:"{point.y:,.0f}"}}},tooltip:{formatter:function(){var t=this.point;return 0==t.tooltip?'<span style="color:{point.color}">'+t.name+"</span>:"+this.point.y.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):'<span style="color:{point.color}">'+t.name+":#"+this.point.tooltip+"</span>-$"+this.point.y.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},series:[{colorByPoint:!0,data:e.Data.Data.MainData}]})},HCLine:function(t,e){Highcharts.setOptions({colors:e.Data.Colors}),Highcharts.chart(t,{chart:{type:"line",backgroundColor:"transparent"},title:{text:null},xAxis:{className:"highcharts-color-0",categories:e.Data.Data.Categories,title:{text:e.Data.XTitle}},yAxis:{className:"highcharts-color-0",title:{text:e.Data.YTitle},gridLineWidth:0},legend:{enabled:!1},credits:{enabled:!1},tooltip:{formatter:function(){var t=this.point;return 0==this.point.ToolTip||null==this.point.ToolTip?'<span style="color:{point.color}">'+this.x+"</span>:"+this.point.y.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):'<span style="color:{point.color}">'+this.x+"</span>: <b>#"+this.point.ToolTip+"</b> - $"+t.y.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},series:e.Data.Data.Data})},HCBasicColumn:function(t,e){Highcharts.setOptions({colors:e.Data.Colors}),Highcharts.chart(t,{chart:{type:"column",backgroundColor:"transparent"},title:{text:null},credits:{enabled:!1},xAxis:{className:"highcharts-color-0",type:"category",title:{text:e.Data.XTitle}},yAxis:{className:"highcharts-color-0",title:{text:e.Data.YTitle},gridLineWidth:0},legend:{enabled:!0},plotOptions:{series:{borderWidth:0,dataLabels:{enabled:!0,format:"{point.y}"}}},tooltip:{formatter:function(){return'<span style="color:{point.color}">'+this.point.name+"</span>:"+this.point.y.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},series:e.Data.Data.MainData})},HCBasicColumnDrillDown:function(){},HCStackedColumn:function(t,e){Highcharts.setOptions({lang:{drillUpText:"< Back to",thousandsSep:","},colors:e.Data.Colors}),Highcharts.chart(t,{chart:{type:"column",backgroundColor:"transparent"},title:{text:null},xAxis:{className:"highcharts-color-0",type:"category",title:{text:e.Data.XTitle}},yAxis:{className:"highcharts-color-0",title:{text:e.Data.YTitle},gridLineWidth:0},legend:{enabled:!0},credits:{enabled:!1},tooltip:{formatter:function(){return'<span style="color:{point.color}">'+this.point.name+":"+this.point.y+":"+this.point.tooltip1+"</span>-$"+this.point.tooltip2.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},plotOptions:{column:{stacking:"normal"},series:{borderWidth:0,dataLabels:{enabled:!0,style:{textShadow:!1,fontSize:"1vw"},format:"{point.y:,.0f}"}}},series:e.Data.Data.MainData})},HCStackedColumnDrillDown:function(t,s){Highcharts.setOptions({lang:{drillUpText:"< Back to",thousandsSep:","},colors:s.Data.Colors}),Highcharts.chart(t,{chart:{type:"column",backgroundColor:"transparent",events:{drilldown:function(t){if(!t.seriesOptions){var e=this,a=s.Data.Data.drilldown,o=s.Data.Data.drilldown2,i=s.Data.Data.drilldown3,n=a[t.point.name],l=o[t.point.name],r=i[t.point.name];e.addSingleSeriesAsDrilldown(t.point,n),e.addSingleSeriesAsDrilldown(t.point,l),e.addSingleSeriesAsDrilldown(t.point,r),e.applyDrilldown()}}}},title:{text:null},xAxis:{className:"highcharts-color-0",type:"category",title:{text:s.Data.XTitle}},yAxis:{className:"highcharts-color-0",title:{text:s.Data.YTitle},gridLineWidth:0},legend:{enabled:!0},tooltip:{formatter:function(){function t(e,t){var a=e.point.series.options.data.filter(function(t){return e.key==t[0]});return("tooltip1"==t?a[0][2]:a[0][3]).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"<br/>"}var e=this.point;return e.drilldown?'<span style="color:{point.color}">'+e.name+":"+this.point.y+":"+this.point.tooltip1+"</span>-$"+this.point.tooltip2.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):'<span style="color:{point.color}">'+e.name+":"+this.point.y+":"+t(this,"tooltip1")+"-$"+t(this,"tooltip2")}},credits:{enabled:!1},plotOptions:{column:{stacking:"normal"},series:{borderWidth:0,dataLabels:{enabled:!0,style:{textShadow:!1,"font-weight":"bold",fontSize:"0.9vw",color:"#003399",fill:"#003399",stroke:"#003399"},format:"{point.y:,.0f}"}}},series:s.Data.Data.MainData,drilldown:{series:[]}})},HCDualAxisGraph:function(){}};l.load_bldes_data(o.bladeType).then(function(t){for(var e=0;e<t.data.Blades.length;e++)$("#renderer_"+o.bladeType).append(a(t.data.Blades[e].Heading)(o)),-1<i.indexOf(t.data.Blades[e].BladeTypeName)?n[t.data.Blades[e].BladeTypeName](o.bladeType+e,t.data.Blades[e]):t.data.Blades[e].BladeTypeName.indexOf("WithPie")&&n.HCPie(o.bladeType+e,t.data.Blades[e]);o.isLoading=!1}),o.onFilterChange=function(t,a){o.isLoading=!0,l.load_bldes_data(a,t).then(function(t){for(var e=0;e<t.data.Blades.length;e++)-1<i.indexOf(t.data.Blades[e].BladeTypeName)?n[t.data.Blades[e].BladeTypeName](o.bladeType+e,t.data.Blades[e]):t.data.Blades[e].BladeTypeName.indexOf("WithPie")&&n.HCPie(a+e,t.data.Blades[e]);o.isLoading=!1})}},controller:["$scope",function(t){}]}}angular.module("ziraff_blades").directive("ziraffBlades",t).controller("ziraffBCtrl",e).directive("bladeRenderer",a),t.$inject=["bldesService","$compile"],e.$inject=["$scope","bldesService","$compile"],a.$inject=["bldesService","$compile"]}();